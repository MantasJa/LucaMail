var Rt=Object.defineProperty,zt=Object.defineProperties;var Pt=Object.getOwnPropertyDescriptors;var ot=Object.getOwnPropertySymbols;var $t=Object.prototype.hasOwnProperty,qt=Object.prototype.propertyIsEnumerable;var ct=(t,r,l)=>r in t?Rt(t,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[r]=l,ae=(t,r)=>{for(var l in r||(r={}))$t.call(r,l)&&ct(t,l,r[l]);if(ot)for(var l of ot(r))qt.call(r,l)&&ct(t,l,r[l]);return t},ne=(t,r)=>zt(t,Pt(r));import{R as e,M as yt,L as at,a as Ht,V as Bt,b as Jt,c as wt,r as n,u as qe,d as Ut,e as Dt,f as Gt,F as Vt,g as Xt,h as Kt,H as Zt,i as Yt,j as Qt,k as we,l as Wt,m as ea,n as ta,o as rt,p as aa,q as ra,s as sa,t as la,v as na,w as oa,D as st,x as ca,y as ia,z as ma,A as ua,B as da,C as pa,E as be,G as fa,I as xa,J as St,K as Nt,N as ga,O as vt,P as kt,Q as Tt,S as We,T as Ea,U as ha,W as ba,X as ya,Y as wa,Z as Sa,_ as Na,$ as va,a0 as ka,a1 as fe,a2 as Ta,a3 as lt,a4 as Ca,a5 as La,a6 as Ie,a7 as ja,a8 as Ia,a9 as Oa,aa as Fa}from"./vendor.0c4d4865.js";const _a=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function l(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=l(a);fetch(a.href,o)}};_a();const He=require("os").homedir();var Be=require("fs");const Je=require("path");let Ue="luca";function D(t){let r=Je.join(He,Ue,t),l;try{l=Be.readFileSync(r,{encoding:"utf8"})}catch{l=!1}return l}const ce=t=>{try{Be.mkdirSync(Je.join(He,Ue,t))}catch{}},me=async(t,r)=>{try{let l=function(s,a){return typeof a=="object"&&a instanceof Set?[...a]:a};await Be.writeFileSync(Je.join(He,Ue,t),JSON.stringify(r,l),{encoding:"utf8",flag:"w"})}catch{}},ie=t=>{let r;try{return r=Be.existsSync(Je.join(He,Ue,t)),r}catch{return!1}},et={SET_USER:"SET_USER",SET_TOKEN:"SET_TOKEN",SET_UID:"SET_UID",SET_AUTHENTICATED:"SET_AUTHENTICATED"},Ct={SET_LOADING:"SET_LOADING"},Aa={SET_THEME:"SET_THEME"},Ma={general:{THEME_PREFERENCE:"THEME_PREFERENCE"},privacy:{}},Re={SET_ALL_MAILS:"SET_ALL_MAILS",SET_ENVELOPE:"SET_ENVELOPE",SET_DRAFT_MAILS:"SET_DRAFT_MAILS",SET_SENT_MAILS:"SET_SENT_MAILS",SET_TRASH_MAILS:"SET_TRASH_MAILS",SET_SPAM_MAILS:"SET_SPAM_MAILS",SET_IMPORTANT_MAILS:"SET_IMPORTANT_MAILS",SET_STARRED_MAILS:"SET_STARRED_MAILS"},ze=t=>({type:et.SET_AUTHENTICATED,payload:t});function Oe({label:t,placeholder:r,Icon:l,value:s,updatedValue:a,visible:o,setvisible:i}){return e.createElement("div",{className:"mx-2"},e.createElement("label",{className:"sr-only"},t),e.createElement("div",{className:"relative"},e.createElement("input",{type:o?t:"text",className:"w-full p-4 pr-12 text-sm text-primary-text border-2 border-double bg-primary-background rounded-lg shadow-lg ",placeholder:r,onChange:m=>a(m.target.value),value:s}),l&&e.createElement("span",{className:"absolute inset-y-0 inline-flex items-center right-4"},e.createElement(l,{size:25,className:"text-primary-text",onClick:()=>{o!=null&&i(!o)}}))))}const tt=[{label:"Security",defaultval:"SSL/TLS",options:["SSL/TLS","NONE"]},{label:"IMAP server",defaultval:"imap.gmail.com",options:[{label:"Google",host:"imap.gmail.com",port:993},{label:"Yahoo",host:"imap.mail.yahoo.com",port:993},{label:"Outlook",host:"outlook.office365.com",port:993},{label:"Proton Mail",host:"mail.protonmail.com",port:993}]}];function Ra({selected:t}){return e.createElement("div",null,tt&&tt.map((r,l)=>{var s;return e.createElement("div",{key:l,className:" grid grid-cols-2 p-2  my-1 "},e.createElement("span",{className:""},r.label),e.createElement("select",{className:" bg-primary-background ",onChange:a=>{a.target.value.toLowerCase().includes("com")?t.host=a.target.value:a.target.value.toLowerCase().includes("tls")?t.secure=!0:t.secure=!1}},(s=r.options)==null?void 0:s.map((a,o)=>e.createElement("option",{key:o,className:"border-2",value:(a==null?void 0:a.host)?a==null?void 0:a.host:a},(a==null?void 0:a.host)?a==null?void 0:a.host:a))))}))}function za({handler:t,btntext:r}){return e.createElement("div",null,e.createElement("button",{className:"inline-flex items-center px-8 py-3 font-medium bg-primary text-primary-background shadow-2xl  rounded-lg hover:opacity-75",onClick:t},r,e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 ml-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"}))))}async function Me(t,r,l,s){await s.connect(),await s.mailboxOpen(r);let a=await s.getMailboxLock(r);try{await s.messageFlagsAdd(l,[t],{uid:!0}),alert(`added flag ${t}`)}catch{alert(`error adding flag ${t}`)}finally{a.release()}await s.logout()}require("electron-log");window.require("mailparser").simpleParser;const Pa=require("electron-store");new Pa;async function it(t,r,l,s){await t.connect(),await t.mailboxOpen(s);let a=await t.getMailboxLock(s);try{await t.messageFlagsRemove(r,[l],{uid:!0})}catch{}finally{a.release()}await t.logout()}require("electron-log");const $a=window.require("mailparser").simpleParser,qa=require("electron-store");new qa;async function Pe(t,r,l,s,a,o,i,m){await l.connect();let h=await l.getMailboxLock(m);try{await l.mailboxOpen(m);let b=await l.status(m,{unseen:!0,messages:!0}),S,g,d;o==!0?(g=b.messages,d=i?g-a:g,S=d-s):(d=i?d-a:b.messages,S=i||d-s>-1?d-s:0),S<0&&(S=0);for await(let T of l.fetch(`${S+1}:${d}`,{envelope:!0,source:!0,flags:!0,status:!0,labels:!0,uid:!0,new:!0})){let c={};c.flags=T.flags,c.envelope=T.envelope,c.uid=T.uid,c.labels=T.labels,t(w=>[...w,c]);let u=await $a(T.source);r(w=>[...w,u])}}catch{}finally{h.release()}await l.logout()}async function Lt(t,r,l,s){await t.connect();let a=await t.getMailboxLock(s);try{let o=await t.fetchOne(r,{uid:!0,envelope:!0,flags:!0,status:!0,labels:!0},{uid:!0}),i={};i.flags=o.flags,i.envelope=o.envelope,i.uid=o.uid,i.labels=o.labels,await l(i)}finally{a.release()}await t.logout()}async function Ha(t,r,l,s){await t.connect(),await t.mailboxOpen(r);try{let a=await t.messageMove(s,l,{uid:!0});alert(`message moved to ${l}`)}catch{alert(`error moving to ${l}`)}await t.logout()}const Ba=window.require("mailparser").simpleParser;async function jt(t,r,l,s,a,o,i,m){await t.connect();let h=await t.getMailboxLock(m);try{await t.mailboxOpen(m);let S=(await t.status(m,{unseen:!0,messages:!0})).messages,g=0;if(S>s){for await(let d of t.fetch(`${s+1}:${S}`,{envelope:!0,source:!0,flags:!0,status:!0,labels:!0,uid:!0,new:!0})){g+=1;let T={};T.flags=d.flags,T.envelope=d.envelope,T.uid=d.uid,T.labels=d.labels,r(u=>[...u,T]);let c=await Ba(d.source);l(u=>[...u,c])}a(g)}}finally{h.release()}await t.logout()}async function Ja(t,r,l){await t.connect(),await t.mailboxOpen(l);let s=await t.getMailboxLock(l);try{await t.messageFlagsAdd(r,["\\Seen"],{uid:!0})}catch{}finally{s.release()}await t.logout()}const It=require("path");async function mt(t,r){let l;try{await t.connect(),l=await t.getMailboxLock("INBOX"),t.authenticated==!0&&r(!0)}catch{r("invalid credentials or configuration")}}async function $e(t,r,l){var s,a;try{await t.connect();let o=await t.listTree(),i={},m;i.folderTree=o==null?void 0:o.folders;let h=await t.getMailboxLock(r);m=await t.status(r,{unseen:!0,messages:!0}),i.mailStatus=m,i.user=(a=(s=t==null?void 0:t.options)==null?void 0:s.auth)==null?void 0:a.user;let b=await t.getQuota();i.quota=b,me(It.join("conf",l),i)}catch{}}async function Ua(t,r,l,s){var a,o;try{await t.connect();let i=await t.listTree(),m={},h;m.folderTree=i==null?void 0:i.folders;let b=await t.getMailboxLock(r);h=await t.status(r,{unseen:!0,messages:!0}),m.mailStatus=h,m.user=(o=(a=t==null?void 0:t.options)==null?void 0:a.auth)==null?void 0:o.user;let S=await t.getQuota();m.quota=S,s(m),me(It.join("conf",l),m)}catch{}}const Fe=t=>({type:Ct.SET_LOADING,payload:t}),{ipcRenderer:Da}=window.require("electron"),Ke=Da,De=({icon:t,isDrawerOpen:r,setisDrawerOpen:l})=>e.createElement("div",{className:" h-8 sticky top-0 bg-positive shadow-sm   flex p-2 justify-between  z-50  "},e.createElement("div",null,t!="back"?e.createElement(e.Fragment,null,t==!1?e.createElement(e.Fragment,null):e.createElement(yt,{size:20,className:"mx-2 text-primary-text cursor-pointer",onClick:()=>{l(!r)}})):e.createElement(e.Fragment,null,e.createElement(at,{to:"/"},e.createElement(Ht,{size:20,className:"mx-2 text-primary-text cursor-pointer"})))),e.createElement("div",{className:"text-primary-text font-mono font-bold  titlebar"},"LucaMail"),e.createElement("div",{className:"flex flex-row justify-evenly "},e.createElement(Bt,{size:20,onClick:()=>Ke.send("minimizeApp"),className:"mx-2 text-primary-text hover:bg-positive cursor-pointer"}),e.createElement(Jt,{size:20,onClick:()=>Ke.send("maximizeApp"),className:"mx-2 text-primary-text hover:bg-positive cursor-pointer"}),e.createElement(wt,{size:20,onClick:()=>Ke.send("closeApp"),className:"mx-2 text-primary-text hover:bg-positive cursor-pointer"})));function Ge({count:t}){return e.createElement("div",{className:""},e.createElement(e.Fragment,null,e.createElement(De,null),e.createElement("div",{className:"flex justify-center items-center  bg-gradient-to-tr from-positive via-primary-background to-primary    h-[calc(100vh_-_2rem)]"},e.createElement("div",{style:{borderTopColor:"transparent"},className:"w-16 h-16  border-4 border-blue-400 border-solid rounded-full animate-spin"}))))}const{ImapFlow:ut}=require("imapflow"),Ga=require("path");function Va(){const[t,r]=n.exports.useState(""),[l,s]=n.exports.useState(""),[a]=n.exports.useState(993),[o,i]=n.exports.useState(),[m,h]=n.exports.useState(!0),[b,S]=n.exports.useState(!1),[g,d]=n.exports.useState(!0),[T,c]=n.exports.useState(""),[u,w]=n.exports.useState("");let v;const f=qe(),[E]=n.exports.useState({host:tt[1].options[0].host,secure:!0,port:a,auth:{user:t,pass:l},emitLogs:!0});n.exports.useEffect(()=>(o==!0&&(ie("")?(ie("user")||(ce("user"),ce("conf")),_()):(ce(""),ce("user"),ce("conf"),_())),()=>{}),[o]);function _(){me(Ga.join("user","user.txt"),E),setTimeout(()=>{f(ze(!0)),S(!1)},2500)}const j=()=>{f(Fe(!0)),!t||!l?(alert("fields cannot be empty"),f(Fe(!1))):$&&(g?(E.host=T,E.port=u,v=new ut(E),mt(v,i),f(Fe(!1))):(v=new ut(E),mt(v,i),f(Fe(!1))))};function $(C){var z=/\S+@\S+\.\S+/;return z.test(C)}return n.exports.useEffect(()=>(E.auth.user=t,E.auth.pass=l,()=>{}),[l,t]),b?e.createElement(Ge,null):e.createElement("div",null,e.createElement("section",{className:"relative flex flex-wrap lg:h-[calc(100vh_-_2rem)] lg:items-center  justify-center text-primary-text  "},e.createElement("div",{className:"w-max px-2 py-12  sm:px-6 lg:px-4 sm:py-10 lg:py-14 bg-positive shadow-lg rounded-md"},e.createElement("div",{className:"max-w-lg mx-auto text-center"},e.createElement("h1",{className:"text-2xl font-bold sm:text-3xl"}," ","Incoming Server Settings"),e.createElement("p",{className:"mt-4 "},"configure your imap settings to get the mails into your box")),e.createElement("div",{className:"max-w-xl mx-auto mt-8  mb-0 space-y-4 "},e.createElement("div",{className:"grid grid-cols-2 "},e.createElement(Oe,{label:"Email",placeholder:"Enter Email",Icon:Ut,value:t,updatedValue:r}),e.createElement(Oe,{label:"password",placeholder:"Enter Password",Icon:m?Dt:Gt,value:l,updatedValue:s,visible:m,setvisible:h})),!g&&e.createElement(Ra,{selected:E}),g&&e.createElement("div",{className:"grid grid-cols-2 "},e.createElement(Oe,{label:"host",placeholder:"Enter Imap Host",Icon:Vt,value:T,updatedValue:c}),e.createElement(Oe,{label:"port",placeholder:"Enter Imap Port",Icon:Xt,value:u,updatedValue:w})),e.createElement("div",{className:"flex items-center justify-center"},e.createElement(za,{btntext:"Login",handler:j})),e.createElement("label",{className:"inline-flex items-center space-x-4 cursor-pointer text-primary-text ml-4"},e.createElement("span",null,g?"Auto":"Manual"),e.createElement("span",{className:"relative"},e.createElement("input",{id:"Toggle2",type:"checkbox",className:"hidden peer",onChange:()=>d(!g)}),e.createElement("div",{className:"w-10 h-4 rounded-full shadow bg-primary peer-checked:bg-primary"}),e.createElement("div",{className:"absolute left-0 w-6 h-6 rounded-full shadow -inset-y-1 peer-checked:right-0 peer-checked:left-auto bg-primary"}))),o!=!0&&e.createElement("span",{className:"font-extrabold"},o)))))}const dt=require("path"),U=JSON.parse(D(dt.join("user","user.txt")))?JSON.parse(D(dt.join("user","user.txt"))):null,Xa={host:U==null?void 0:U.host,port:465,secure:!0,auth:U==null?void 0:U.auth};function Ka({username:t,subject:r,body:l,time:s,isstarred:a,read:o,setisAnyMailOpen:i,setopenedmail:m,messageId:h,mailObject:b,CheckForSelectedDiv:S,ref:g,setcomposeopen:d}){const[T,c]=n.exports.useState(a),[u,w]=n.exports.useState(o);return e.createElement("div",{ref:g,className:`${u?"bg-secondary  opacity-90":"bg-positive opacity-100"} rounded-sm  mr-4  flex flex-col   overflow-clip
                                       bg-gradient-to-br from-positive via-primary-background to-positive shadow-lg lg:max-w-lg  md:max-w-md sm:max-w-sm  p-4 m-2  flex-wrap`,onClick:()=>{i(!0),m(b),w(!0),d(!1)}},e.createElement("div",{className:"flex lg:flex-row flex-col justify-between  "},e.createElement("div",{className:"flex-row flex justify-start items-center "},e.createElement("div",{className:"h-10 w-10 bg-gradient-to-tr from-primary via-primary-background to-primary rounded-tr-full pt-2 mr-1 items-center justify-center flex shadow-lg"},e.createElement("span",{className:"uppercase font-extrabold"},r[0]?r[0]:t[0])),e.createElement("div",{className:"flex flex-col"},e.createElement("span",{className:"text-primary-text font-mono font-semibold"},r))),e.createElement("div",{className:"flex flex-col "},e.createElement("span",{className:"text-primary-text "},s||""))),e.createElement("div",null,e.createElement("div",{className:"p-2 flex justify-between "},e.createElement("span",{className:"text-primary-text text-sm  capitalize text-clip truncate "},t||""),u?e.createElement(Kt,{size:18,className:"text-primary",onClick:()=>{w(!u),S(h,"unread")}}):e.createElement("div",{className:"bg-gradient-to-tr from-primary-background via-positive to-primary px-1 py-1 rounded-br-xl rounded-tl-xl shadow-xl   self-end"},e.createElement("span",{className:"text-sm"},"read"))),e.createElement("div",{className:"flex flex-row justify-between p-2"},e.createElement("span",{className:"text-primary-text cursor-pointer "},l||""),e.createElement("div",null,e.createElement("span",{className:"text-primary-text "},T==!0?e.createElement(Zt,{size:18,className:"text-primary",onClick:()=>{c(!1),S(h,"removestar")}}):e.createElement(Yt,{size:18,onClick:()=>{c(!0),S(h,"star")}}))))))}function Za({FetchUptoNextLimit:t}){return e.createElement("div",{className:"flex self-end  text-coolGray-800"},e.createElement("button",{title:"fetch more",type:"button",className:"inline-flex items-center justify-center self-end w-8 h-8 py-0 border rounded-md shadow-md bg-coolGray-50 border-coolGray-100",onClick:()=>t()},e.createElement("svg",{viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4"},e.createElement("polyline",{points:"9 18 15 12 9 6"}))))}function Ya({Refresh:t,TotalCount:r,FetchLimit:l,FetchUptoNextLimit:s,Data:a}){return e.createElement("div",{className:"flex flex-col "},e.createElement("div",{className:"  flex  mt-4 items-center justify-evenly"},e.createElement("div",{className:"flex flex-row"},e.createElement(Qt,{size:30,className:"mr-2 cursor-pointer ",onClick:t})),e.createElement("span",{className:"font-mono font-semibold "},a==null?void 0:a.length," Fetched Messages"),e.createElement("div",{className:"hidden lg:flex"},e.createElement(Za,{TotalCount:r,FetchLimit:l,FetchUptoNextLimit:s}))))}const{ImapFlow:_e}=window.require("imapflow"),Qa=require("path");function Wa({Data:t,setisAnyMailOpen:r,setopenedmail:l,message:s,TotalCount:a,FetchLimit:o,FetchUptoNextLimit:i,toggle:m,settoggle:h,selected:b,setselected:S,Refresh:g,setcomposeopen:d,Body:T}){let c=new Date;const u=we(),[w,v]=n.exports.useState(),[f,E]=n.exports.useState([]),[_,j]=n.exports.useState([]);function $(p,N){var P,V,X;let L=!1,A=[];if(u.pathname.toLowerCase()!="/"){for(let K=0;K<(s==null?void 0:s.length);K++){const k=s[K];if(((P=k.envelope)==null?void 0:P.messageId)===(p==null?void 0:p.messageId)&&((V=k==null?void 0:k.flags)==null||V.forEach(B=>{A.push(B)}),(A==null?void 0:A.length)>0))for(let B=0;B<A.length;B++)A[B].toLowerCase().includes(N)&&(L=!0)}return L}else{for(let K=0;K<(s==null?void 0:s.length);K++){const k=s[K];if(((X=k.envelope)==null?void 0:X.messageId)===(p==null?void 0:p.messageId))if(Object.keys(k.flags).length>=1)Object.values(k.flags).forEach(R=>{R.toLowerCase().includes(N)&&(L=!0)});else return!1}return L}}n.exports.useEffect(()=>{C()},[w]);function C(){if(w){let p=s.filter(N=>{var L,A;if(((L=N.envelope)==null?void 0:L.messageId)!=((A=w.envelope)==null?void 0:A.messageId))return N});p.push(w),(p==null?void 0:p.length)>0&&p.map(N=>{E(L=>[...L,N])})}}function z(p,N){for(let L=0;L<s.length;L++){const A=s[L];let P=(u==null?void 0:u.pathname)=="/"?"INBOX":u==null?void 0:u.state;if(p===A.envelope.messageId){switch(N){case"star":const V=new _e(U);Me("\\Flagged",P,A.uid,V);break;case"removestar":const X=new _e(U);it(X,A.uid,"\\Flagged",P);break;case"unread":const K=new _e(U);it(K,A.uid,"\\Seen",P);break}setTimeout(()=>{const V=new _e(U);Lt(V,A.uid,v,P)},2e3)}}}function q(p){let N=new Date(p==null?void 0:p.date),L;return(N==null?void 0:N.toDateString())===(c==null?void 0:c.toDateString())?L=N==null?void 0:N.toTimeString():L=N==null?void 0:N.toDateString(),L.slice(0,8)}return n.exports.useEffect(()=>{f.length==(s==null?void 0:s.length)&&(f==null||f.map(p=>{j(N=>[...N,p==null?void 0:p.envelope])}))},[f]),n.exports.useEffect(()=>{if((_==null?void 0:_.length)==(s==null?void 0:s.length)){let p={};p.Mail=f,p.Body=T,me(Qa.join("mail","mail"),p)}return()=>{}},[_]),e.createElement("div",{className:"   "},e.createElement(Ya,{Refresh:g,toggle:m,settoggle:h,selected:b,setselected:S,TotalCount:a,FetchLimit:o,FetchUptoNextLimit:i,Data:t}),e.createElement("div",{className:"flex flex-col "},t&&(t==null?void 0:t.map((p,N)=>{var L,A;return e.createElement(Ka,{username:p&&((L=p==null?void 0:p.from[0])==null?void 0:L.address),body:p.subject,subject:p&&((A=p==null?void 0:p.sender[0])==null?void 0:A.name),time:q(p),isstarred:$(p,"flagged"),setisAnyMailOpen:r,setopenedmail:l,messageId:p.messageId,mailObject:p,read:$(p,"seen"),CheckForSelectedDiv:z,key:N.toString(),setcomposeopen:d})}))))}const er={contents:[{icon:Wt,tooltip:"Delete message",func:"delete"},{icon:ea,tooltip:"spam",func:"spam"},{icon:ta,tooltip:"archive",func:"archive"},{icon:rt,tooltip:"star_outline",func:"star"}],rightcontent:[{icon:aa,tooltip:"backward",func:"backward"},{icon:ra,tooltip:"forward",func:"forward"}]};const{ImapFlow:ke}=window.require("imapflow");require("electron");const tr=require("path");function pt({Icon:t,func:r,id:l,ActiveMail:s,MailWithBody:a,setActiveMail:o,setopenedmail:i,ActiveIndex:m,maillist:h,message:b,pathContents:S}){new ke(U);const g=we();function d(u){var w,v;if(u=="forward"){for(let f=0;f<a.length;f++)if(((w=a[f])==null?void 0:w.messageId)===(s==null?void 0:s.messageId)&&m+1<(a==null?void 0:a.length)){const E=a[f+1];o(E),i(E)}}else for(let f=0;f<a.length;f++)if(((v=a[f])==null?void 0:v.messageId)===(s==null?void 0:s.messageId)&&m-1<(a==null?void 0:a.length)&&m!=0){const E=a[f-1];o(E),i(E)}}function T(){let u=a==null?void 0:a.filter(f=>{if(f.messageId!=(s==null?void 0:s.messageId))return f}),w=h==null?void 0:h.filter(f=>{if(f.messageId!=(s==null?void 0:s.messageId))return f}),v=b==null?void 0:b.filter(f=>{if(f.envelope.messageId!=s.messageId)return f});if((u==null?void 0:u.length)==(a==null?void 0:a.length)-1&&(w==null?void 0:w.length)==(h==null?void 0:h.length)-1&&(v==null?void 0:v.length)==(b==null?void 0:b.length)-1){let f={};f.Mail=v,f.Body=u,me(tr.join("mail","mail"),f)}}function c(u){var v;let w=(g==null?void 0:g.pathname)=="/"?"INBOX":g==null?void 0:g.state;switch(u){case"delete":const f=new ke(U);let E;(v=S==null?void 0:S.folderTree)==null||v.map(C=>{var z;(C==null?void 0:C.folders)?(z=C==null?void 0:C.folders)==null||z.map(q=>{((q==null?void 0:q.path.toLowerCase().includes("trash"))||(q==null?void 0:q.path.toLowerCase().includes("bin")))&&(E=q.path)}):((C==null?void 0:C.path.toLowerCase().includes("trash"))||(C==null?void 0:C.path.toLowerCase().includes("bin")))&&(E=C.path)}),Ha(f,w,E,l),(g==null?void 0:g.pathname)=="/"&&T();break;case"spam":const _=new ke(U);Me("$Phishing",w,l,_);break;case"star":const j=new ke(U);Me("\\Flagged",w,l,j);break;case"backward":d("backward");break;case"forward":d("forward");break;case"archive":const $=new ke(U);Me("Archive",w,l,$);break;default:alert("invalid function to handle");break}}return e.createElement("div",{className:" cursor-pointer",onClick:()=>c(r)},e.createElement(t,{size:35,className:"text-primary-text  mr-4 bg-secondary p-2 rounded-lg"}))}function ar({mailInfo:t}){var r,l,s;return e.createElement("div",null,e.createElement("div",{className:"relative flex flex-col  group"},e.createElement(sa,{size:40,className:"px-2"}),e.createElement("div",{className:"absolute top-0 flex flex-col items-center hidden mt-6 group-hover:flex"},e.createElement("div",{className:"w-3 h-3 -mb-2 rotate-45 bg-black"}),e.createElement("div",{className:"relative z-50 p-2 text-xs leading-none text-white whitespace-pre-wrap bg-secondary shadow-lg"},e.createElement("span",{className:"my-1"},(r=t[0])==null?void 0:r.line)," ",e.createElement("br",null),e.createElement("span",{className:"my-1"},(l=t[7])==null?void 0:l.line),e.createElement("br",null),e.createElement("span",{className:"my-1"},(s=t[15])==null?void 0:s.line)))))}function rr({label:t,type:r,fileDownload:l,file:s}){function a(o){var i=["Bytes","KB","MB","GB","TB"];if(o==0)return"0 Byte";var m=parseInt(Math.floor(Math.log(o)/Math.log(1024)));return Math.round(o/Math.pow(1024,m),2)+" "+i[m]}return e.createElement("div",{class:"flex flex-col p-4 bg-primary-background justify-center  shadow-lg rounded-xl m-2"},e.createElement("span",{class:"p-2 text-gray-900 rounded-lg bg-gray-50",onClick:()=>l(s)},e.createElement(la,{size:30})),e.createElement("h6",{class:"mt-2 font-medium text-gray-900"},t),e.createElement("span",null,a(s==null?void 0:s.size)),e.createElement("p",{class:"hidden mt-1 text-sm text-gray-500 sm:block"},r?r.substring(r.lastIndexOf("/")+1):""))}function sr({Html:t,subject:r,username:l,time:s,from:a,mailinfo:o,setcomposeopen:i,composeopen:m,setactionFromReply:h,DownloadAttachMents:b,currMail:S}){let g=new Date(s),d=S==null?void 0:S.attachments;function T(c){b(c)}return e.createElement("div",{className:"flex flex-col"},e.createElement("div",{className:"flex flex-col"},e.createElement("div",{className:"flex items-center"},e.createElement("span",{className:"font-bold text-xl  pt-2"},r),(d==null?void 0:d.length)>0&&e.createElement(na,{size:35,className:" pt-2"})),e.createElement("span",null,g.toString())),e.createElement("div",{className:" "},e.createElement("div",{className:" items-center flex  mt-10 justify-between"},e.createElement("div",{className:"flex "},e.createElement("div",{className:"h-10 w-10 bg-gradient-to-tr from-primary via-primary-background to-primary rounded-tr-full pt-2 mr-1 items-center justify-center flex shadow-lg"},e.createElement("span",{className:"uppercase font-extrabold"},l&&l[0]?l[0]:r[0])),e.createElement("div",{className:"flex flex-col "},e.createElement("span",{className:"text-primary-text text-xl capitalize"},l),e.createElement("div",{className:" flex-row flex  items-center"},a,e.createElement("div",{className:"  "},e.createElement("div",{className:" "},o&&e.createElement(ar,{mailInfo:o})))))),e.createElement("div",{className:"flex m-2"},e.createElement("button",{onClick:()=>{i(!m),m||h("reply")}},e.createElement(oa,{size:35,className:"mr-4"}))))),e.createElement("div",{className:" justify-center items-center flex p-4"},e.createElement("iframe",{srcDoc:t,style:{color:"white"},className:"w-full aspect-video border-0  text-primary-text overflow-y-scroll h-full  body"})),e.createElement("div",{className:" grid grid-cols-2 "},d==null?void 0:d.map(c=>e.createElement(rr,{label:c==null?void 0:c.filename,type:c==null?void 0:c.contentType,file:c,fileDownload:u=>T(u)}))))}const lr=window.require("nodemailer");window.require("electron");function Ot({editorState:t,setEditorState:r,composeopen:l,setcomposeopen:s,toadress:a,subject:o,action:i}){const[m,h]=e.useState(a),[b,S]=e.useState(o),[g,d]=e.useState(""),[T,c]=n.exports.useState(!1),w=st.convertToRaw(t==null?void 0:t.getCurrentContent()).blocks.map(j=>!j.text.trim()&&`
`||j.text).join(`
`),[v,f]=n.exports.useState([]),E=()=>{const j=pa(t==null?void 0:t.getCurrentContent());d(j)};n.exports.useEffect(()=>{E()},[w]);const _=(j,$)=>new Promise((C,z)=>{const q=new window.FileReader;q.onloadend=async()=>{let p={};p.path=j==null?void 0:j.path,p.filename=j==null?void 0:j.name,f(N=>[...N,p]),C({data:{link:URL.createObjectURL(j)}})},q.readAsDataURL(j)});return e.createElement(ca,{style:{backgroundColor:"black",color:"wheat"},className:" mt-4  overflow-y-scroll  scroll-smooth    w-max  scrollbar-thin scrollbar-thumb-primary scrollbar-track-secondary  scrollbar-thumb-rounded-full scrollbar-track-rounded-full flex flex-col z-50 rounded-lg shadow-lg   "},e.createElement("div",null,e.createElement("div",{className:"  flex justify-between w-full   rounded-2xl"},e.createElement("button",{className:"m-2",onClick:()=>{c(!T)}},e.createElement(ia,{size:25,className:" "})),e.createElement("button",{className:"m-2",onClick:()=>s(!l)},e.createElement(ma,{size:25,className:""})))),e.createElement("div",{className:"p-2  m-2 mx-2   flex"},e.createElement("span",{className:"mr-2 "},"To:"),e.createElement("input",{type:"text",className:" w-full outline-none ",style:{backgroundColor:"black",color:"white"},value:m,onChange:j=>{i=="newcompose"&&h(j.target.value)},placeholder:"type to address "})),e.createElement("div",{className:"p-2  mx-2  flex"},e.createElement("span",{className:"mr-2 "},"Subject:"),e.createElement("input",{type:"text",value:b,onChange:j=>{i=="newcompose"&&S(j.target.value)},style:{backgroundColor:"black",color:"white"},placeholder:"type mail subject here",className:" font-bold w-full outline-none "})),e.createElement("div",{className:"grow p-2 mx-2 max-h-full grid  rounded-2xl text-primary-text text-opacity-70   "},e.createElement(ua.exports.Editor,{editorState:t,defaultEditorState:t,onEditorStateChange:r,toolbar:{options:["inline","fontSize","fontFamily","image","list","textAlign","emoji","remove","history"],image:{previewImage:!0,uploadEnabled:!0,urlEnabled:!1,uploadCallback:_,defaultSize:{height:100,width:100},alignmentEnabled:!0}},editorClassName:"",toolbarStyle:{backgroundColor:"black",justifyContent:"space-between"},wrapperClassName:"",className:`opacity-70 max-w-full  
                max-h-full 
                `,wrapperStyle:{backgroundColor:"black",height:300},placeholder:"Type your mail body",editorStyle:{color:"white",backgroundColor:"black",width:"100%"},toolbarCustomButtons:[e.createElement("div",null,e.createElement("button",{className:"p-2 bg-primary items-center flex font-bold px-2 rounded-md shadow-lg m-2 z-50 ",onClick:()=>nr(U.auth.user,m,b,g,v,f)},"Send",e.createElement(da,{size:25,className:"  text-primary-text "})))]})))}async function nr(t,r,l,s,a,o){const i=lr.createTransport(Xa);let m={from:t,to:r,subject:l,text:s,html:s,attachments:(a==null?void 0:a.length)>0?a:!1};i.sendMail(m,function(h,b){h||(alert("message sent successfully"),o([]),i.close())})}const{ImapFlow:ft}=window.require("imapflow"),or=require("os"),cr=or.homedir();var xt=require("fs");const Ze=require("path");let ir="luca";function mr({openedmail:t,setopenedmail:r,composeopen:l,setcomposeopen:s,MailWithBody:a,message:o,actionFromReply:i,setactionFromReply:m,maillist:h,pathContents:b}){var K;const{contents:S,rightcontent:g}=er,[d,T]=n.exports.useState(null),[c,u]=n.exports.useState(void 0),[w,v]=n.exports.useState(0),[f,E]=e.useState(()=>st.EditorState.createEmpty()),[_,j]=n.exports.useState(),[$,C]=n.exports.useState(0),z=we(),[q,p]=n.exports.useState([]),[N,L]=n.exports.useState([]);n.exports.useEffect(()=>{var k,B,R;for(let J=0;J<(a==null?void 0:a.length);J++)if(((k=a[J])==null?void 0:k.messageId)===(t==null?void 0:t.messageId)){v(J),T(a[J]);for(let H=0;H<(o==null?void 0:o.length);H++){const W=o[H];((B=W.envelope)==null?void 0:B.messageId)===((R=a[J])==null?void 0:R.messageId)&&u(W.uid)}}},[t,d,a,w]);let A,P;n.exports.useEffect(()=>{A=new ft(U),P=new ft(U);let k=(z==null?void 0:z.pathname)=="/"?"INBOX":z==null?void 0:z.state;Ja(A,c,k),Lt(P,c,j,k)},[d,t]),n.exports.useEffect(()=>{X()},[_]),n.exports.useEffect(()=>{N.length==(o==null?void 0:o.length)&&(N==null||N.map(k=>{p(B=>[...B,k==null?void 0:k.envelope])}))},[N]),n.exports.useEffect(()=>{if((q==null?void 0:q.length)==(N==null?void 0:N.length)&&_){let k={};k.Mail=N,k.Body=a,me(Ze.join("mail","mail"),k)}return()=>{}},[q]);function V(k){try{if(k){const B=Ze.join(cr,ir,"downloads");xt.existsSync(B)||ce("downloads");let R=k.filename;const J=Buffer.from(k==null?void 0:k.content),H=xt.createWriteStream(Ze.join(B,R)).write(J);alert("download success")}}catch{alert("error downloading")}}function X(){if(C($+1),_){let k=o.filter(B=>{var R,J;if(((R=B.envelope)==null?void 0:R.messageId)!=((J=_.envelope)==null?void 0:J.messageId))return B});$==2&&(k.push(_),k.map(B=>{L(R=>[...R,B])}))}}return e.createElement("div",{className:"p-2  bg-gradient-to-tr from-positive via-primary-background to-primary"},e.createElement("div",{className:"flex flex-row justify-between items-center mt-3  "},e.createElement("div",{className:"flex "},S==null?void 0:S.map(k=>e.createElement(pt,{Icon:k.icon,func:k.func,id:c,MailWithBody:a,ActiveMail:d,maillist:h,message:o,pathContents:b}))),e.createElement("div",{className:"mr-11 flex-row flex"},e.createElement("div",{className:"flex"},g==null?void 0:g.map(k=>e.createElement(pt,{Icon:k.icon,func:k.tooltip,ActiveMail:d,MailWithBody:a,setActiveMail:T,setopenedmail:r,ActiveIndex:w,message:o}))))),e.createElement("div",{className:"p-2 mt-2"},d&&e.createElement(sr,{Html:d.html,time:(K=d==null?void 0:d.date)==null?void 0:K.toString(),username:d.from.value[0].name,subject:d.subject,text:d.textAsHtml,fromhtml:d.from.html,from:d.from.value[0].address,mailinfo:d==null?void 0:d.headerLines,currMail:d,setcomposeopen:s,composeopen:l,setactionFromReply:m,actionFromReply:i,DownloadAttachMents:k=>{V(k)}})),l&&e.createElement("div",{className:"w-11/12"},e.createElement("div",{className:"absolute bottom-4   right-8 "},e.createElement("div",{className:"flex flex-row justify-center self-center items-center  "},e.createElement(Ot,{editorState:f,setEditorState:E,composeopen:l,setcomposeopen:s,toadress:d==null?void 0:d.from.value[0].address,subject:d.subject,action:i})))))}const ur=[{label:"Inbox",icon:Nt,link:"/"},{label:"sent",icon:ga,link:"/sent"},{label:"draft",icon:vt,link:"/draft"},{label:"trash",icon:kt,link:"/trash"},{label:"import",icon:Tt,link:"/important"},{label:"Spam",icon:We,link:"/spam"},{label:"Star",icon:rt,link:"/starred"}],dr=[{label:"contact",icon:be,link:"/mail"},{label:"sent",icon:be,link:"/mail"},{label:"draft",icon:be,link:"/mail"},{label:"trash",icon:be,link:"/mail"}],gt=[{label:"message",icon:be,link:ur},{label:"message",icon:fa,link:dr},{label:"message",icon:xa,link:"/mail"},{label:"message",icon:be,link:"/mail"},{label:"New Folder",icon:St,link:"/newfolder"}],Et=[{label:"Settings",icon:Ea,link:"/settings"},{label:"Logout",icon:ha,link:"/"}],Ye={title:"Support us",tagline:"Supporting another's success won't ever dampen yours",btn:"Donate Now"},Ft=t=>({type:Re.SET_ALL_MAILS,payload:t}),_t=t=>({type:Re.SET_ENVELOPE,payload:t});require("electron");const pr=require("os"),fr=pr.homedir();var xr=require("fs");const gr=require("path");let Er="luca";function Qe({index:t,label:r,Icon:l,active:s,link:a,bottom:o}){const[i]=n.exports.useState(!1),m=qe();return e.createElement(at,{to:{pathname:o?(r==null?void 0:r.toLowerCase().includes("settings"))?"/settings":"/":(r==null?void 0:r.toLowerCase().includes("inbox"))?"/":`/folder/:${r}`,state:a},state:a,onClick:()=>{if(r.toLowerCase().includes("logout"))try{xr.rmSync(gr.join(fr,Er),{recursive:!0,force:!0}),m(_t([])),m(Ft([])),m(ze(!1))}catch{alert("error logging out")}},className:`${s===r?"":"opacity-100 "}  my-4     cursor-pointer opacity-90    no-underline  `},e.createElement("div",{className:"flex justify-between flex-row items-center "},e.createElement("div",{className:`z-50 rounded-md  items-center flex flex-row p-1   justify-self-start transform  duration-300 ease-in-out ${i&&" "}`},l&&e.createElement(l,{className:` ${s==r?"bg-primary text-primary-background":" bg-primary-background  text-primary-text"} p-2 rounded-lg shadow-lg `,size:30}),e.createElement("div",null,e.createElement("span",{className:"text-primary-text capitalize    font-semibold pl-2  no-underline "},r)))))}function hr(){return e.createElement("div",null,e.createElement("aside",{className:"flex  bg-gradient-to-tl from-primary-background to-primary rounded-tl-2xl rounded-br-2xl  shadow-lg  py-2 mt-3 mr-2 rounded-sm  justify-center items-center flex-col "},e.createElement("h3",{className:"text-xl font-bold p-2"},Ye.title),e.createElement("p",{className:" text-sm text-gray-500 p-2"},Ye.tagline),e.createElement("a",{href:"https://ko-fi.com/raghavyuva",className:"inline-flex items-center p-1   no-underline text-sm font-medium text-primary-text shadow-md  hover:bg-pink-600"},Ye.btn)))}function br({composeopen:t,setactionFromReply:r,setcomposeopen:l}){return e.createElement("div",{className:" items-center justify-center flex mt-2"},e.createElement("button",{className:" shadow-2xl p-2 rounded-lg    text-center text-primary-text items-center flex flex-row font-bold ",onClick:()=>{l(!t),t||r("newcompose")}},e.createElement(ba,{size:32,className:"bg-primary p-2 rounded-lg text-primary-background"}),e.createElement("div",null,e.createElement("span",{className:"text-primary-text capitalize p-1  font-bold  "},"Compose"))))}const Ae=require("path");function yr({ExtendedSideBarContents:t,composeopen:r,setcomposeopen:l,setactionFromReply:s,isAnyMailOpen:a,showSupportCard:o}){var d,T;const[i,m]=n.exports.useState(0),h=we(),[b,S]=n.exports.useState(((d=JSON.parse(D(Ae.join("conf","conf.txt"))))==null?void 0:d.folderTree)?(T=JSON.parse(D(Ae.join("conf","conf.txt"))))==null?void 0:T.folderTree:0);n.exports.useEffect(()=>{var c,u;return b||S(((c=JSON.parse(D(Ae.join("conf","conf.txt"))))==null?void 0:c.folderTree)?(u=JSON.parse(D(Ae.join("conf","conf.txt"))))==null?void 0:u.folderTree:0),()=>{}},[t]),n.exports.useEffect(()=>{var w;let u=h.pathname.substring(h.pathname.lastIndexOf(":")+1).split("%");u[0]=="/"&&(u[0]=b?(w=b[0])==null?void 0:w.path:u[0]),b.length>0&&(b==null||b.map((v,f)=>{var E,_,j,$;((j=v==null?void 0:v.path)==null?void 0:j.substring(((E=v==null?void 0:v.path)==null?void 0:E.lastIndexOf("/"))+1).toLowerCase().includes((_=u[0])==null?void 0:_.toLowerCase()))?m(v==null?void 0:v.path):($=v==null?void 0:v.folders)==null||$.map((C,z)=>{var q,p,N;(C==null?void 0:C.path.substring(((q=C==null?void 0:C.path)==null?void 0:q.lastIndexOf("/"))+1).toLowerCase().includes((p=u[0])==null?void 0:p.toLowerCase()))&&m(C==null?void 0:C.path.substring(((N=C==null?void 0:C.path)==null?void 0:N.lastIndexOf("/"))+1))})}))},[h]);function g(c){switch(c==null?void 0:c.toLowerCase()){case"inbox":return Nt;case"starred":return rt;case"drafts":return vt;case"important":return Tt;case"junk":return We;case"spam":return We;case"trash":return kt;case"sent mail":return ya;default:return St}}return e.createElement("div",{className:" flex flex-col shadow-lg justify-between h-[calc(100vh_-_2rem)] ml-2"},e.createElement("div",{className:"flex flex-col justify-center "},a&&e.createElement(br,{setactionFromReply:s,composeopen:r,setcomposeopen:l}),e.createElement("div",{className:" flex flex-col mt-2   "},b.length&&(b==null?void 0:b.map((c,u)=>{var w;return e.createElement(e.Fragment,null,!(c==null?void 0:c.folders)&&e.createElement(Qe,{label:(c==null?void 0:c.folders)?"":c==null?void 0:c.name,key:u,index:u,Icon:g(c==null?void 0:c.name),active:i,link:c.path,bottom:!1}),(w=c==null?void 0:c.folders)==null?void 0:w.map((v,f)=>e.createElement(Qe,{label:v.name,key:f,index:f,Icon:g(v==null?void 0:v.name),active:i,link:v.path,bottom:!1})))})))),e.createElement("div",{className:" flex flex-col"},!o&&e.createElement(hr,null),Et&&Et.map((c,u)=>e.createElement(Qe,{label:c.label,key:u.toString(),index:u,Icon:c.icon,link:c.link,bottom:!0}))))}function wr({sideBarContents:t,isDrawerOpen:r,setisDrawerOpen:l,composeopen:s,setcomposeopen:a,actionFromReply:o,setactionFromReply:i,isAnyMailOpen:m,showSupportCard:h}){return n.exports.useState(r?0:6545),e.createElement("div",{className:"bg-positive    md:w-32  w-0 h-screen"},e.createElement("div",{className:"md:flex flex-col   hidden h-full"},e.createElement("ul",{className:""},e.createElement(yr,{isDrawerOpen:r,composeopen:s,setcomposeopen:a,setisDrawerOpen:l,ExtendedSideBarContents:t==null?void 0:t.folderTree,actionFromReply:o,setactionFromReply:i,isAnyMailOpen:m,showSupportCard:h}))))}const Sr={primary:"#6246ea",secondary:"#ededed",accent:"#dbdbdb",text:"#2b2c34",backgroundPrimary:"#FFFFFF",backgroundSecondary:"#F6F9FC"},Nr={primary:"#EF7C8E",secondary:"#d8a7b1",accent:"#b6e2d3",text:"black",backgroundPrimary:"#fae8e0",backgroundSecondary:"#0000FF"},vr={primary:"blue",secondary:"#010307",accent:"#001f3d",text:"#F9F8FF",backgroundPrimary:"black",backgroundSecondary:"#0000FF"},kr={primary:"#0C6170",secondary:"#fef6e4",accent:"#eaddcf",text:"#020826",backgroundPrimary:"#fffffe",backgroundSecondary:"#1F1E24"},Tr={primary:"#e53170",secondary:"#141414",accent:"#0B1320",text:"#d1d1e9",backgroundPrimary:"black",backgroundSecondary:"#1F1E24"},Cr={primary:"#7ec8e3",secondary:"#050a30",accent:"#001f3d",text:"#F9F8FF",backgroundPrimary:"black",backgroundSecondary:"#0000FF"},Lr="base",jr={base:Sr,creamRose:Nr,dark:vr,solarized:kr,RavenBlack:Tr,OceanRipples:Cr},Ir=[{label:"base",primary:"#FFFFFF",isdark:!1,default:!0},{label:"creamRose",primary:"#EF7C8E",isdark:!1,default:!1},{label:"dark",primary:"#000000",isdark:!0,default:!1},{label:"solarized",primary:"#f25042",isdark:!1,default:!1},{label:"RavenBlack",primary:"black",isdark:!0,default:!1},{label:"OceanRipples",primary:"#7ec8e3",isdark:!0,default:!1}],Or=t=>({"--color-primary":t.primary||"","--color-secondary":t.secondary||"","--color-positive":t.accent||"","--color-text-primary":t.text||"","--background-primary":t.backgroundPrimary||"","--background-secondary":t.backgroundSecondary||""}),At=t=>{const r=Or(jr[t]);if(!r)return;const l=document.documentElement;Object.keys(r).forEach(s=>{s!=="name"&&l.style.setProperty(s,r[s])})};function Fr({selected:t,setselected:r,toggle:l,settoggle:s}){const[a,o]=n.exports.useState(t);return n.exports.useEffect(()=>{o(t)},[t]),e.createElement("div",{className:"relative inline-block text-left"},e.createElement("div",null,e.createElement("button",{onClick:()=>s(!l),type:"button",className:"inline-flex justify-center w-full  bg-gradient-to-tl from-primary-background to-primary rounded-tl-2xl rounded-br-2xl  shadow-lg px-4 py-2  text-sm   font-bold ",id:"menu-button","aria-expanded":"true","aria-haspopup":"true"},t,e.createElement(wa,{className:"-mr-1 ml-2 h-5 w-5"}))),l&&e.createElement("div",{className:"origin-top-right absolute right-0 mt-2  px-5    rounded-md shadow-lg bg-primary-background  ring-opacity-5  ",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabindex:"-1"},Ir.map(i=>e.createElement("div",{className:"flex items-center cursor-pointer my-2 ",role:"none"},a!=(i==null?void 0:i.label)?e.createElement("div",{className:" p-1 h-2 w-2  rounded-full",style:{backgroundColor:i.primary}}):e.createElement(Sa,{size:18}),e.createElement("div",{onClick:()=>r(i.label),className:"text-gray-700 block px-4 py-2 text-sm no-underline p-2"},i.label)))))}function Mt(t,r,l){const[s,a]=n.exports.useState(t),o=n.exports.useRef(null),i=m=>{o.current&&!o.current.contains(m.target)&&(a(!1),l(!1))};return n.exports.useEffect(()=>(document.addEventListener("click",i,!0),()=>{document.removeEventListener("click",i,!0)})),{ref:o,isComponentVisible:s,setIsComponentVisible:a}}function _r({Quota:t,searchText:r,setsearchText:l,search:s,selection:a,setselection:o,toggled:i,settoggled:m,uname:h,isDrawerOpen:b}){var f,E,_,j;const[S,g]=n.exports.useState(!1),[d,T]=n.exports.useState("creamRose"),[c,u]=n.exports.useState(!1),{ref:w}=Mt(!1,c,u);n.exports.useEffect(()=>{T(d),At(d)},[d]);const v=((((f=t==null?void 0:t.storage)==null?void 0:f.limit)-((E=t==null?void 0:t.storage)==null?void 0:E.usage))/1073741824).toString().slice(0,4);return e.createElement("div",{className:" sticky  top-0 z-0 hidden md:flex  "},e.createElement("nav",{className:`bg-secondary ${b&&"w-[calc(100vw_-_2rem)]"} w-screen  shadow-lg`},e.createElement("div",{className:""},e.createElement("div",{className:"flex items-center md:justify-between h-14"},e.createElement("div",{className:"flex flex-row items-center"},e.createElement("div",{className:"flex  items-center ml-10 bg-positive rounded-md  p-1   focus-within:shadow-lg "},e.createElement(Na,{size:30,className:"mr-2  cursor-pointer ",onClick:()=>m(!i)}),e.createElement("input",{type:"text",className:" text-primary-text  outline-none bg-positive",placeholder:"Search All Mails",onFocus:()=>g(!S),value:r,onChange:$=>l($.target.value),onKeyPress:$=>{$.key==="Enter"&&s()}}),e.createElement(va,{className:"text-primary-text mx-2",size:20,onClick:s}))),e.createElement("div",{className:"md:flex  items-center hidden  "},((_=t==null?void 0:t.storage)==null?void 0:_.status)&&e.createElement("div",{className:"lg:flex hidden "},e.createElement("span",{className:"text-primary-text font-mono mr-2"},"Disk Used: ",(j=t==null?void 0:t.storage)==null?void 0:j.status," ,"),e.createElement("span",{className:"text-primary-text font-mono mr-2"},"Disk Available : ",v," gb")),e.createElement("div",{ref:w,className:"m-2 flex items-center mr-4  "},e.createElement("div",{className:"flex flex-col items-center "},e.createElement(Fr,{selected:d,setselected:T,toggle:c,settoggle:u}))),e.createElement("div",{className:"flex items-center justify-evenly m-2"},e.createElement("span",{className:" font-semibold  leading-loose"},h)))))))}const Z={Banner:[{title:"Awesome to be here,",tagline:"Spread the message",description:"Let world knows how you are and where you are, Might be your personnal,official or just an hangout! start sharing with your connections ",PromotebtnText:"Compose New"}],stats:[{title:"Hey",tagline:" it's time to see how your mail is working! explore now, to get to know your latest mails",stat1:"Fetched Messages",stat2:"Unread Messages",stat3:"Starred Messages"}]};var Ar="./assets/promote.4faf13c3.svg";function Mr({composeopen:t,setcomposeopen:r}){const{title:l,tagline:s,description:a,PromotebtnText:o}=Z.Banner[0];return e.createElement("aside",{className:"relative overflow-hidden   rounded-xl lg:flex max-w-screen-xl px-4 shadow-2xl mx-auto "},e.createElement("div",{className:"w-full p-12 text-center lg:w-1/2 sm:p-16 lg:p-24 lg:text-left"},e.createElement("div",{className:"max-w-xl mx-auto lg:ml-0"},e.createElement("p",{className:"text-sm font-medium"},l),e.createElement("p",{className:"mt-2 text-2xl font-bold text-white sm:text-3xl"},s),e.createElement("p",{className:"hidden lg:mt-4 lg:block"},a),e.createElement("button",{href:"",onClick:()=>r(!t),className:"inline-block px-5 py-3 mt-8 text-sm font-medium  bg-gradient-to-tl from-primary-background to-primary rounded-tl-2xl rounded-br-2xl  shadow-lg "},o))),e.createElement("div",{className:"relative w-full h-64  lg:w-1/2 lg:h-auto"},e.createElement("img",{src:Ar,alt:"lucamail promotional banner",className:"absolute inset-0 object-contain w-full h-full"})))}function Rr({uname:t,Data:r,UnreadCount:l,StarredCount:s}){return e.createElement("div",null,e.createElement("section",{className:"text-white bg-blue-600"},e.createElement("div",{className:"max-w-screen-xl px-0 py-16 mx-auto  "},e.createElement("div",{className:"max-w-xl"},e.createElement("h2",{className:"text-2xl font-bold text-white sm:text-3xl"},Z==null?void 0:Z.stats[0].title,",",t==null?void 0:t.split("@")[0]),e.createElement("p",{className:"mt-4 sm:text-xl"},Z==null?void 0:Z.stats[0].tagline)),e.createElement("ul",{className:"grid grid-cols-1 gap-8 mt-8 sm:grid-cols-2 lg:grid-cols-3"},e.createElement("li",{className:"p-8 shadow-xl rounded-xl"},e.createElement("p",{className:"text-3xl font-extrabold"},r==null?void 0:r.length),e.createElement("p",{className:"mt-1 text-xl font-medium"}," ",Z==null?void 0:Z.stats[0].stat1)),e.createElement("li",{className:"p-8 shadow-xl rounded-xl"},e.createElement("p",{className:"text-3xl font-extrabold"},l),e.createElement("p",{className:"mt-1 text-xl font-medium"}," ",Z==null?void 0:Z.stats[0].stat2)),e.createElement("li",{className:"p-8 shadow-xl rounded-xl"},e.createElement("p",{className:"text-3xl font-extrabold"},s),e.createElement("p",{className:"mt-1 text-xl font-medium"}," ",Z==null?void 0:Z.stats[0].stat3))))))}function zr({uname:t,Data:r,composeopen:l,setcomposeopen:s}){const[a,o]=n.exports.useState(0),[i,m]=n.exports.useState(0),h=we();n.exports.useEffect(()=>{let S=b("seen");o((r==null?void 0:r.length)-S);let g=b("flagged");m(g)},[r]);function b(S){var d;let g=0;if(h.pathname.toLowerCase()!="/"){for(let T=0;T<(r==null?void 0:r.length);T++){const c=r[T];let u=[];if((d=c==null?void 0:c.flags)==null||d.forEach(w=>{u.push(w)}),(u==null?void 0:u.length)>0)for(let w=0;w<u.length;w++)u[w].toLowerCase().includes(S)&&(g+=1)}return g}else{for(let T=0;T<(r==null?void 0:r.length);T++){const c=r[T];Object.keys(c.flags).length>=1&&Object.values(c.flags).forEach(w=>{w.toLowerCase().includes(S)&&(g+=1)})}return g}}return e.createElement("div",{className:"bg-gradient-to-tr from-positive via-primary-background to-primary h-fit  lg:h-[calc(100vh_-_6rem)] p-4 w-screen "},e.createElement(Rr,{uname:t,Data:r,UnreadCount:a,StarredCount:i}),e.createElement("div",{className:""},e.createElement(Mr,{composeopen:l,setcomposeopen:s})))}window.require("electron");const ye={boolvaled:[{label:"Drawer Open on startup",default:!0},{label:"Hide Support Card on Drawer",default:!1},{label:"Store Mails in Local Drive",default:!0},{label:"Hide TopBar",default:!1}]},ht=[{label:"sent-by"},{label:"date"},{label:"A-Z"},{label:"Z-A"}];function Pr({selected:t,setselected:r,toggle:l,settoggle:s}){return e.createElement("div",{className:"fixed z-50 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},e.createElement("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4  text-center sm:block sm:p-0"},e.createElement("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity","aria-hidden":"true"}),e.createElement("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"\u200B"),e.createElement("div",{className:"inline-block align-bottom bg-secondary p-2 rounded-lg  text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},e.createElement("div",{className:"flex flex-row justify-between"},e.createElement("span",{className:"text-xl font-mono font-bold"},"Filter Mails"),e.createElement("span",null,e.createElement(wt,{size:30,className:"text-primary",onClick:()=>{r(""),s(!l)}}))),e.createElement("div",{className:"bg-secondary px-4 py-3 sm:px-6 grid grid-cols-2 space-y-2 "},ht&&ht.map(a=>e.createElement("div",{className:"bg-primary-background p-2 shadow-lg  rounded-md  mx-2 items-center flex justify-center   ",onClick:()=>{t==a.label?r(""):r(a.label)}},e.createElement("span",{className:"text-primary-text font-semibold"},a.label),a.label==t&&e.createElement(ka,{size:20,className:"text-primary"})))))))}const $r=require("path");function nt({isAnyMailOpen:t,setisAnyMailOpen:r,Tabs:l,Data:s,theme:a,openedmail:o,setopenedmail:i,composeopen:m,setcomposeopen:h,MailWithBody:b,unseenCount:S,listOfUid:g,message:d,Quota:T,actionFromReply:c,setactionFromReply:u,searchText:w,setsearchText:v,search:f,FilteredData:E,Status:_,FetchLimit:j,FetchUptoNextLimit:$,Refresh:C,ConfData:z}){let q=z.user;const[p,N]=n.exports.useState(!1),[L,A]=n.exports.useState(),[P,V]=n.exports.useState(E&&(E==null?void 0:E.length)>0?E:s),[X,K]=n.exports.useState(P),[k,B]=n.exports.useState(0),{ref:R}=Mt(!1,p,N);let J=JSON.parse(localStorage.getItem("Settings"));const[H,W]=n.exports.useState(J?J[0].default:ye.boolvaled[0].default),[re]=n.exports.useState(J?J[3].default:ye.boolvaled[3].default),[xe]=n.exports.useState(J?J[1].default:ye.boolvaled[1].default),[ue,se]=e.useState(()=>st.EditorState.createEmpty()),[le,Se]=n.exports.useState(z||JSON.parse(D($r.join("conf","conf.txt"))));n.exports.useEffect(()=>{V(E&&(E==null?void 0:E.length)>0?E:s)},[s]),n.exports.useEffect(()=>{if(L)switch(te(E&&(E==null?void 0:E.length)>0?E:s),L){case"A-Z":let ge=P.sort((Y,Q)=>Y.subject.localeCompare(Q.subject));te(ge);break;case"Z-A":let de=P.sort((Y,Q)=>Y.subject.localeCompare(Q.subject));te(de==null?void 0:de.reverse());break;case"sent-by":let pe=P.sort((Y,Q)=>Y.from[0].address.localeCompare(Q.from[0].address));te(pe);break;default:let Ne=P==null?void 0:P.sort((Y,Q)=>new Date(Q.date)-new Date(Y.date));te(Ne);break}},[L]),n.exports.useEffect(()=>{},[k]);function te(ge){B(k+1),V(ge)}return n.exports.useEffect(()=>{K(P)},[P]),e.createElement("div",null,e.createElement(De,{Icon:yt,isDrawerOpen:H,setisDrawerOpen:W}),e.createElement("div",{className:" flex h-[calc(100vh_-_2rem)] "},e.createElement("div",{ref:R,className:" overflow-hidden"},p&&e.createElement(Pr,{toggle:p,settoggle:N,selected:L,setselected:A}),e.createElement(Ta.div,{animate:{x:H?0:-100},transition:{ease:"easeInOut",duration:3}},H&&e.createElement(wr,{sideBarContents:z||gt,isDrawerOpen:H,setisDrawerOpen:W,setcomposeopen:h,composeopen:m,actionFromReply:c,setactionFromReply:u,isAnyMailOpen:t,showSupportCard:xe}))),e.createElement("div",{className:"flex-1 flex-col flex overflow-hidden "},!re&&e.createElement(_r,{isDrawerOpen:H,setisDrawerOpen:W,theme:a,Quota:T&&T,searchText:w,setsearchText:v,search:f,selection:L,setselection:A,toggled:p,settoggled:N,uname:q}),e.createElement("div",{className:"flex flex-1 flex-row overflow-hidden  "},(s==null?void 0:s.length)>0&&e.createElement("div",{className:" overflow-y-scroll  scroll-smooth    w-max justify-center items-center scrollbar-thin scrollbar-thumb-primary scrollbar-track-secondary  scrollbar-thumb-rounded-full scrollbar-track-rounded-full "},e.createElement(Wa,{Data:E&&(E==null?void 0:E.length)>0?E:X,Tabs:l,isAnyMailOpen:t,setisAnyMailOpen:r,openedmail:o,setopenedmail:i,unseenCount:S,message:d,Body:b,TotalCount:_,FetchLimit:j,FetchUptoNextLimit:$,setcomposeopen:h,Refresh:C})),t?e.createElement("div",{className:" overflow-y-scroll no-scrollbar w-full "},e.createElement(mr,{openedmail:o,setopenedmail:i,composeopen:m,setcomposeopen:h,MailWithBody:b,listOfUid:g,message:d,actionFromReply:c,setactionFromReply:u,maillist:s,pathContents:le||gt})):e.createElement(e.Fragment,null,m?e.createElement("div",{className:" w-full   mx-10"},e.createElement(Ot,{editorState:ue,setEditorState:se,composeopen:m,setcomposeopen:h,toadress:"",subject:"",action:c})):e.createElement("div",{className:" overflow-y-scroll scrollbar-thin scrollbar-thumb-primary scrollbar-track-secondary w-full md:flex hidden  "},e.createElement(zr,{uname:q,Data:d,composeopen:m,setcomposeopen:h})))))))}nt.propTypes={showSidebar:fe.bool,showTopbar:fe.bool,isDrawerOpen:fe.bool,setisDrawerOpen:fe.func,sideBarContents:fe.array,isAnyMailOpen:fe.bool,setisAnyMailOpen:fe.func};const{ImapFlow:Te}=window.require("imapflow"),ee=require("path");function qr({maillist:t,Envelope:r,clientconfig:l}){var y,M,F;let s=JSON.parse(D(ee.join("user","user.txt")))?JSON.parse(D(ee.join("user","user.txt"))):null;const[a,o]=n.exports.useState([]),[i,m]=n.exports.useState([]),[h,b]=n.exports.useState(!0),[S,g]=n.exports.useState([]),[d,T]=n.exports.useState(!1),[c,u]=n.exports.useState(""),[w,v]=n.exports.useState(!1),[f,E]=n.exports.useState("newcompose"),[_,j]=n.exports.useState(""),[$,C]=n.exports.useState([]),[z,q]=n.exports.useState([]),[p,N]=n.exports.useState([]),[L,A]=n.exports.useState(JSON.parse(D(ee.join("conf","conf.txt")))?JSON.parse(D(ee.join("conf","conf.txt"))):0),[P]=n.exports.useState((y=L==null?void 0:L.mailStatus)==null?void 0:y.messages),[V]=n.exports.useState(P?P>25?25:P:10),[X,K]=n.exports.useState(JSON.parse(D(ee.join("mail","mail")))?(F=(M=JSON.parse(D(ee.join("mail","mail"))))==null?void 0:M.Mail)==null?void 0:F.length:0),[k,B]=n.exports.useState(0),[R,J]=n.exports.useState(0),[H,W]=n.exports.useState([]),[re,xe]=n.exports.useState([]),ue=qe();let se,le,Se=JSON.parse(localStorage.getItem("Settings"));const[te,ge]=n.exports.useState(Se?Se[2].default:ye.boolvaled[2].default);n.exports.useEffect(()=>{try{L==0&&(ie(ee.join("conf","conf.txt"))?A(JSON.parse(D(ee.join("conf","conf.txt")))):(le=new Te(s),Ua(le,"INBOX","conf.txt",A))),!ie("mail")||!ie(ee.join("mail","mail"))?(ce("mail"),Y()):Ne()}catch{}return setTimeout(()=>{b(!1)},2500),()=>{}},[]),n.exports.useEffect(()=>{const x=setInterval(()=>{de()},6e5);return()=>{clearInterval(x)}},[]);async function de(){await Ee()}n.exports.useEffect(()=>(ue(Ft(a)),X==0&&(a==null||a.map(x=>{g(I=>[...I,x==null?void 0:x.envelope])})),X<(a==null?void 0:a.length)&&te&&(Ve(),J(R+1)),()=>{}),[a]),n.exports.useEffect(()=>{if(a==null?void 0:a.length){let x=[];x=S==null?void 0:S.filter((I,O,G)=>G.indexOf(I)===O),x.length>0&&ue(_t(x))}return()=>{}},[S]);function pe(){var x,I;try{let O=JSON.parse(D(ee.join("mail","mail")));return((x=O==null?void 0:O.Mail)==null?void 0:x.length)>0&&((I=O==null?void 0:O.Body)==null?void 0:I.length)?O:!1}catch{return!1}}async function Ne(){var x,I,O;try{let G=pe();Object.keys(G).length!=0?(K((x=G==null?void 0:G.Mail)==null?void 0:x.length),(I=G==null?void 0:G.Mail)==null||I.map(he=>{o(ve=>[...ve,he]),g(ve=>[...ve,he==null?void 0:he.envelope])}),(O=G==null?void 0:G.Body)==null||O.map(he=>{m(ve=>[...ve,he])}),await Ee()):Y()}catch{Y()}}function Y(){Q(o,m,!1,!1)}function Q(x,I,O,G){se=new Te(s),Pe(x,I,se,V,X,G,O,"INBOX")}async function Ve(){let x={};x.Mail=a,x.Body=i,await me(ee.join("mail","mail"),x)}function Xe(){let x=P-X;se=new Te(s),Pe(q,N,se,x<V?x:V,X,!0,!0,"INBOX")}n.exports.useEffect(()=>{z.length>0&&p.length>0&&(z.forEach(x=>{o([...a,x]),g([...S,x==null?void 0:x.envelope])}),p.forEach(x=>{m([...i,x])}))},[z]);function Ee(){let x=new Te(s);jt(x,W,xe,P,B,a,i,"INBOX"),le=new Te(s),$e(le,"INBOX","conf.txt")}n.exports.useEffect(()=>(k>0&&Le(),()=>{}),[H,re,k]);function Le(){if((H==null?void 0:H.length)==k){m(O=>[...O,...re]);let x=[],I=[];H==null||H.map(O=>{x==null||x.push(O),I==null||I.push(O==null?void 0:O.envelope)}),(x==null?void 0:x.length)==(H==null?void 0:H.length)&&(I==null?void 0:I.length)==(H==null?void 0:H.length)&&(o(O=>[...O,...x]),g(O=>[...O,...I]))}}function je(){let x=r==null?void 0:r.filter(function(I){var O;return(O=I==null?void 0:I.subject)==null?void 0:O.toLowerCase().includes(_==null?void 0:_.toLowerCase())});(x==null?void 0:x.length)>0?C(x):C([])}return h?e.createElement(Ge,null):e.createElement("div",null,e.createElement(nt,{DrawerContents:!0,isAnyMailOpen:d,setisAnyMailOpen:T,Data:r==null?void 0:r.sort((x,I)=>new Date(I.date)-new Date(x.date)),openedmail:c,setopenedmail:u,composeopen:w,setcomposeopen:v,MailWithBody:i,message:t,Quota:L==null?void 0:L.quota,actionFromReply:f,setactionFromReply:E,searchText:_,setsearchText:j,search:je,FilteredData:$,Status:P,FetchLimit:V,FetchUptoNextLimit:Xe,Refresh:Ee,ConfData:L}))}const Hr=t=>({loading:t.loadingDetails.loading,maillist:t.mailDetails.maillist,Envelope:t.mailDetails.Envelope}),Br={};var Jr=lt(Hr,Br)(qr);const{ImapFlow:Ce}=window.require("imapflow"),oe=require("path");function Ur(){var Ee,Le,je;const[t,r]=n.exports.useState([]),[l,s]=n.exports.useState([]),[a,o]=n.exports.useState([]),[i,m]=n.exports.useState(!1),[h,b]=n.exports.useState(!1),[S,g]=n.exports.useState(""),[d,T]=n.exports.useState(!1),c=we();let u=c==null?void 0:c.state.substring((c==null?void 0:c.state.lastIndexOf("/"))+1);const[w,v]=n.exports.useState("newcompose"),[f,E]=n.exports.useState(""),[_,j]=n.exports.useState([]),[$,C]=n.exports.useState([]),[z,q]=n.exports.useState(0);let p=JSON.parse(D(oe.join("conf",u)))?JSON.parse(D(oe.join("conf",u))):0,N=(Ee=p==null?void 0:p.mailStatus)==null?void 0:Ee.messages,L=N?N>25?25:N:10,A;const[P,V]=n.exports.useState(0),[X,K]=n.exports.useState([]),[k,B]=n.exports.useState([]),[R,J]=n.exports.useState([]),[H,W]=n.exports.useState([]),[re,xe]=n.exports.useState(JSON.parse(D(oe.join("mail",u)))?(je=(Le=JSON.parse(D(oe.join("mail",u))))==null?void 0:Le.Mail)==null?void 0:je.length:0);let ue=JSON.parse(localStorage.getItem("Settings"));const[se,le]=n.exports.useState(ue?ue[2].default:ye.boolvaled[2].default);n.exports.useEffect(()=>(m(!0),()=>{}),[]),n.exports.useEffect(()=>(Se(),te(),()=>{}),[c]);function Se(){m(!0),r([]),s([]),C([]),o([]),J([]),W([])}function te(){if(!ie(oe.join("conf",u))){let y=new Ce(U);$e(y,c==null?void 0:c.state,u)}ie(oe.join("mail",u))?de():pe()}function ge(){var y,M;try{let F=JSON.parse(D(oe.join("mail",u)));return((y=F==null?void 0:F.Mail)==null?void 0:y.length)>0&&((M=F==null?void 0:F.Body)==null?void 0:M.length)?F:!1}catch{return!1}}async function de(){var y,M,F,x;try{let I=ge();((y=Object.keys(I))==null?void 0:y.length)!=0?(xe((M=I==null?void 0:I.Mail)==null?void 0:M.length),(F=I==null?void 0:I.Mail)==null||F.map(O=>{r(G=>[...G,O]),o(G=>[...G,O==null?void 0:O.envelope])}),(x=I==null?void 0:I.Body)==null||x.map(O=>{s(G=>[...G,O])}),await Q()):pe()}catch{pe()}}function pe(){r([]),s([]),o([]),b(!1),C([]),A=new Ce(U),Pe(r,s,A,L,0,!1,!1,c==null?void 0:c.state)}function Ne(){let y=N-(a==null?void 0:a.length),M=new Ce(U);Pe(K,B,M,y<L?y:L,a==null?void 0:a.length,!0,!0,c==null?void 0:c.state)}n.exports.useEffect(()=>{if(t==null?void 0:t.length){let y=[];y=t==null?void 0:t.filter((M,F,x)=>x.indexOf(M)===F),y==null||y.map(M=>{C(F=>[...F,M==null?void 0:M.envelope])}),xe(y==null?void 0:y.length)}return re<(t==null?void 0:t.length)&&se&&(Y(),V(P+1)),()=>{}},[t]);async function Y(){let y={};y.Mail=t,y.Body=l,await me(oe.join("mail",u),y)}function Q(){let y=new Ce(U);jt(y,J,W,N,q,t,l,c==null?void 0:c.state),A=new Ce(U),$e(A,c==null?void 0:c.state,u)}n.exports.useEffect(()=>(z>0&&Ve(),()=>{}),[R,H,z]),n.exports.useEffect(()=>{if($){let y=[];y=$==null?void 0:$.filter((M,F,x)=>x.indexOf(M)===F),y.length==re&&m(!1),o(y)}return()=>{}},[$,re]);function Ve(){if((R==null?void 0:R.length)==z){s(F=>[...F,...H]);let y=[],M=[];R==null||R.map(F=>{y==null||y.push(F),M==null||M.push(F==null?void 0:F.envelope)}),(y==null?void 0:y.length)==(R==null?void 0:R.length)&&(M==null?void 0:M.length)==(R==null?void 0:R.length)&&(r(F=>[...F,...y]),o(F=>[...F,...M]))}}n.exports.useEffect(()=>{X.length>0&&k.length>0&&(X.forEach(y=>{r([...t,y]),o([...a,y==null?void 0:y.envelope])}),k.forEach(y=>{s([...l,y])}))},[X]);function Xe(){let y=a==null?void 0:a.filter(function(M){var F;return(F=M==null?void 0:M.subject)==null?void 0:F.toLowerCase().includes(f==null?void 0:f.toLowerCase())});(y==null?void 0:y.length)>0?j(y):j([])}return i?e.createElement(Ge,{count:t==null?void 0:t.length}):e.createElement("div",null,e.createElement(nt,{DrawerContents:!0,isAnyMailOpen:h,setisAnyMailOpen:b,Data:a==null?void 0:a.sort((y,M)=>new Date(M.date)-new Date(y.date)),openedmail:S,setopenedmail:g,composeopen:d,setcomposeopen:T,MailWithBody:l,message:t,Quota:p==null?void 0:p.quota,actionFromReply:w,setactionFromReply:v,searchText:f,setsearchText:E,search:Xe,FetchLimit:L,FetchUptoNextLimit:Ne,FilteredData:_,Status:N,Refresh:Q,ConfData:p}))}const Dr=t=>({loading:t.loadingDetails.loading,maillist:t.mailDetails.maillist,Envelope:t.mailDetails.Envelope}),Gr={};var Vr=lt(Dr,Gr)(Ur);function Xr({}){let t=JSON.parse(localStorage.getItem("Settings"));const[r,l]=n.exports.useState(t||ye.boolvaled);function s(){localStorage.setItem("Settings",JSON.stringify(r)),r[2].default==!1,alert("changes applied")}return e.createElement("div",null,e.createElement(De,{icon:"back"}),e.createElement("div",{className:"mt-10 sm:mt-0  bg-opacity-10 w-screen h-[calc(100vh_-_2rem)] bg-[url('https://images.unsplash.com/photo-1491895200222-0fc4a4c35e18?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80')] items-center justify-center flex flex-col"},e.createElement("div",{className:"  "},e.createElement("div",{className:" overflow-hidden sm:rounded-md shadow-2xl  px-20 bg-secondary"},e.createElement("div",{className:"px-4 py-5  space-y-6 sm:p-6"},e.createElement("fieldset",null,e.createElement("legend",{className:"text-base font-medium text-primary-text"},"General Settings"),r==null?void 0:r.map((a,o)=>e.createElement("div",{className:"mt-4 space-y-4"},e.createElement("div",{className:"flex items-start"},e.createElement("div",{className:"flex items-center h-5"},e.createElement("input",{id:a.label,name:a.label,value:a.default,checked:a.default,onChange:i=>{let m=[...r],h=ae({},r[o]);h.default=i.target.checked,m[o]=h,l(m)},type:"checkbox",className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})),e.createElement("div",{className:"ml-3 text-sm"},e.createElement("label",{className:"font-medium text-primary-text"},a.label))))))),e.createElement("div",{className:"px-4 py-3 bg-gray-50 text-right sm:px-6"},e.createElement("button",{onClick:s,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},"apply changes"))))))}function Kr(){return e.createElement("div",null,e.createElement("section",{className:"flex  items-center  p-16 bg-coolGray-50 text-coolGray-800 h-screen"},e.createElement("div",{className:"container flex flex-col items-center justify-center px-5 mx-auto my-8"},e.createElement("div",{className:"max-w-md text-center"},e.createElement("h2",{className:"mb-8 font-extrabold text-9xl text-coolGray-400"},e.createElement("span",{className:"sr-only"},"Error"),"404"),e.createElement("p",{className:"text-2xl font-semibold md:text-3xl"},"Sorry, we couldn't find this page."),e.createElement("p",{className:"mt-4 mb-8 text-coolGray-600"},"But dont worry, you can find plenty of other things on our homepage."),e.createElement(at,{to:"/",className:"px-8 py-3 font-semibold rounded bg-violet-600 text-coolGray-50"},e.createElement("div",{className:"px-8 py-3 font-semibold rounded bg-green-600 text-black"},"Back to homepage"))))))}const{ImapFlow:Zr}=require("imapflow"),bt=require("path");function Yr({loading:t,Authenticated:r,default_theme:l}){const s=qe();let a=JSON.parse(D(bt.join("user","user.txt")))?JSON.parse(D(bt.join("user","user.txt"))):null;return n.exports.useEffect(()=>{var o,i;if(((o=a==null?void 0:a.auth)==null?void 0:o.user)&&((i=a==null?void 0:a.auth)==null?void 0:i.pass)){s(ze(!0));let m=new Zr(a);ie("conf")||(ce("conf"),$e(m,"INBOX","conf.txt"))}else s(ze(!1));return()=>{}},[a]),t?e.createElement(Ge,null):e.createElement("div",null,r?e.createElement(Ca,null,e.createElement(La,null,e.createElement(Ie,{index:!0,path:"/",exact:!0,element:e.createElement(Jr,{clientconfig:a})}),e.createElement(Ie,{index:!0,path:"/folder/:folderName",exact:!0,element:e.createElement(Vr,null)}),e.createElement(Ie,{index:!0,path:"/settings",exact:!0,element:e.createElement(Xr,null)}),e.createElement(Ie,{path:"*",element:e.createElement(Kr,null)}))):e.createElement(e.Fragment,null,e.createElement(De,{icon:!1}),e.createElement(Va,null)))}const Qr=t=>({Token:t.userDetails.token,loading:t.loadingDetails.loading,default_theme:t.themeDetails.theme,Authenticated:t.userDetails.Authenticated}),Wr={};var es=lt(Qr,Wr)(Yr);function ts(){return n.exports.useEffect(()=>(At("solarized"),()=>{}),[]),e.createElement("div",{className:" bg-primary-background text-primary-text "},e.createElement(es,null))}const as={loading:!1},rs=(t=as,{type:r,payload:l})=>{switch(r){case Ct.SET_LOADING:return ne(ae({},t),{loading:l});default:return t}},ss={maillist:[],Envelope:[]},ls=(t=ss,{type:r,payload:l})=>{switch(r){case Re.SET_ALL_MAILS:return ne(ae({},t),{maillist:l});case Re.SET_ENVELOPE:return ne(ae({},t),{Envelope:l});default:return t}},ns={prefer_type:"day_night"},os=(t=ns,{type:r,payload:l})=>{switch(r){case Ma.general.THEME_PREFERENCE:return ne(ae({},t),{prefer_type:l});default:return t}},cs={theme:Lr},is=(t=cs,{type:r,payload:l})=>{switch(r){case Aa.SET_THEME:return ne(ae({},t),{theme:l});default:return t}},ms={user:[],Authenticated:!1},us=(t=ms,{type:r,payload:l})=>{switch(r){case et.SET_USER:return ne(ae({},t),{user:l});case et.SET_AUTHENTICATED:return ne(ae({},t),{Authenticated:l});default:return t}},ds=ja({userDetails:us,loadingDetails:rs,themeDetails:is,settingsDetails:os,mailDetails:ls}),ps=Ia(ds,{},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Oa.render(e.createElement(n.exports.StrictMode,null,e.createElement(Fa,{store:ps},e.createElement(ts,null))),document.getElementById("root"));
